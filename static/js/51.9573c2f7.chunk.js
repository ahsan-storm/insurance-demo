(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{1191:function(e,t,a){"use strict";a.r(t);var n=a(967),c=a(902),r=a(2),s=a.n(r),o=a(904),l=a(894),i=a(896),u=a(898),d=a(897),m=a(893),p=a(908),f=a(901),g=a(920),b=a(907);var h=function(e){console.log("Props: ",e);var t=e.product.productImage?"data:image/jpeg;base64, "+e.product.productImage:"../../assets/img/no-image.png",a=Object(r.useState)(e.product.quantityRequested),n=Object(c.a)(a,2),o=n[0],m=n[1],p=Object(r.useState)(!1),f=Object(c.a)(p,2),g=f[0],h=f[1],E=Object(r.useState)(e.product.quantityReceived),v=Object(c.a)(E,2),y=v[0],j=v[1],N=function(e){return!!/^\d+$/.test(e)};return s.a.createElement(l.a,{xs:"12",sm:"6",md:"4",lg:"4",xl:"2"},s.a.createElement(i.a,null,s.a.createElement(u.a,null,s.a.createElement("div",{className:"text-center"},s.a.createElement("img",{src:t,height:"100"}))),s.a.createElement(d.a,{className:"m-0"},s.a.createElement("p",{className:"text-lg-primary m-0 font-weight-bold"},e.product.productName),s.a.createElement("p",{className:"m-0"},"Request - ",s.a.createElement("span",{className:"text-muted"},e.product.quantityRequested," items")),s.a.createElement("p",{className:"m-0"},"Request Price - ",s.a.createElement("span",{className:"text-muted"},e.product.totalPriceRequested," ",s.a.createElement("small",{className:"text-muted"},"SEK"))),s.a.createElement("p",{className:"m-0"},"SENT"===e.status?"Sent":"Sending"," - ",s.a.createElement("span",{className:"text-muted"},y," items")),s.a.createElement("p",{className:"m-0"},"Final Price - ",s.a.createElement("span",{className:"text-muted"},e.product.productPrice*y," ",s.a.createElement("small",{className:"text-muted"},"SEK")))),"SENT"!==e.status&&s.a.createElement("div",{className:g?"d-flex justify-content-between bg-primary m-0":"d-flex justify-content-between bg-danger m-0"},s.a.createElement(b.a,{onChange:function(e){return t=e.target.value,console.log(t),void((N(t)||""===t)&&m(t));var t},disabled:!g,value:o,className:"w-50 rounded-0 text-center",size:"16"}),s.a.createElement("span",{onClick:function(){if(console.log("hello"),g){var t=e.product;t.quantityReceived=parseInt(o),t.totalPriceReceived=e.product.productPrice*o,e.productQuantityChanged(t)}j(o),h(!g)},className:"w-50 text-center align-self-center pointer"},g?"Update":"Change"))))},E=a(142);t.default=function(e){var t=Object(E.d)(),a=Object(r.useState)(!0),b=Object(c.a)(a,2),v=b[0],y=b[1],j=Object(r.useState)(!1),N=Object(c.a)(j,2),O=N[0],x=N[1],R=Object(r.useState)({}),P=Object(c.a)(R,2),S=P[0],w=P[1],q=Object(r.useState)([]),z=Object(c.a)(q,2),I=z[0],T=z[1],C=Object(r.useState)(0),k=Object(c.a)(C,2),A=k[0],M=k[1];Object(r.useEffect)(function(){K()},[]);var K=function(){fetch(o.d+"/"+e.match.params.id).then(function(e){return e.json()}).then(function(e){console.log("Transfer Details: ",e),y(!1),w(e),T(e.products),M(e.totalPrice)}).catch(function(e){y(!1),console.log("Fetch products error: ",e)})},Q=function(e){console.log("PQC: ",e);var t=I.findIndex(function(t){return t.id===e.id});I[t]=e,console.log("Updated products: ",I),T(Object(n.a)(I));var a=0;I.forEach(function(e){console.log(e.totalPriceReceived),a+=e.totalPriceReceived,console.log("TP: ",a)}),M(a)};return s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(l.a,{xl:12},s.a.createElement(i.a,null,s.a.createElement(u.a,{className:"align-items-center"},s.a.createElement("i",{className:"fa fa-align-justify"}),s.a.createElement("span",null,"Added Products")),s.a.createElement(d.a,null,v&&s.a.createElement("div",{className:"loader-container"},s.a.createElement(g.CircleLoader,{size:100,color:"#20a8d8",loading:v})),!v&&s.a.createElement("div",null,I.length>0&&s.a.createElement("div",{className:"d-flex justify-content-between"},s.a.createElement("p",{className:"font-2xl"},"Total Requested: ",S.totalPrice," ",s.a.createElement("small",{className:"text-muted"},"SEK"))),0===I.length&&s.a.createElement("div",{className:"text-center"},s.a.createElement("img",{src:"../../assets/img/not-found.png",height:"150"}),s.a.createElement("p",{className:"font-weight-bold"},"No product added")),I.length>0&&s.a.createElement(m.a,null,I.map(function(t,a){return s.a.createElement(h,{key:a,product:t,productQuantityChanged:Q,status:S.status,history:e.history})})),I.length>0&&s.a.createElement("div",{className:"d-flex justify-content-between"},s.a.createElement("p",{className:"font-2xl"},"Total Received: ",A," ",s.a.createElement("small",{className:"text-muted"},"SEK"))))),"REQUESTED"===S.status&&s.a.createElement(p.a,{className:"d-flex"},s.a.createElement(f.a,{disabled:O,type:"submit",onClick:function(){x(!0),console.log("Request products: ",I);var a=[];I.forEach(function(e){var t={productInvoiceItemId:e.id,quantityReceived:e.quantityReceived,quantityRequested:e.quantityRequested,totalPriceReceived:e.totalPriceReceived,totalPriceRequested:e.totalPriceRequested};a.push(t)});var n={productInvoiceId:e.match.params.id,totalPriceReceived:A,products:a};fetch(o.b,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(a){x(!1),t.show("Products sent successfully",{timeout:3e3,type:"success"}),console.log("Product sent successfully: ",a),e.history.push("/dashboard")}).catch(function(e){x(!1),console.log("Error while sending products",e),t.show("Error while sending products",{timeout:5e3,type:"error"})})},size:"sm",color:"primary"},s.a.createElement("i",{className:"fa fa-dot-circle-o"}),"Send Items"),s.a.createElement("div",{className:"ml-2"},s.a.createElement(g.CircleLoader,{size:25,color:"#20a8d8",loading:O}))))))}},904:function(e,t,a){"use strict";a.d(t,"i",function(){return c}),a.d(t,"h",function(){return r}),a.d(t,"e",function(){return s}),a.d(t,"f",function(){return o}),a.d(t,"a",function(){return l}),a.d(t,"g",function(){return i}),a.d(t,"d",function(){return u}),a.d(t,"c",function(){return d}),a.d(t,"b",function(){return m});var n="http://localhost:8080/",c=n+"units",r=n+"products",s=r+"/quantity",o=r+"/search",l=n+"products/create",i=n+"products/transfers",u=n+"products/invoices",d=u+"/create",m=u+"/confirm"},907:function(e,t,a){"use strict";var n=a(36),c=a(102),r=a(892),s=a(64),o=a(2),l=a.n(o),i=a(28),u=a.n(i),d=a(888),m=a.n(d),p=a(889),f={children:u.a.node,type:u.a.string,size:u.a.string,bsSize:u.a.string,valid:u.a.bool,invalid:u.a.bool,tag:p.p,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),plaintext:u.a.bool,addon:u.a.bool,className:u.a.string,cssModule:u.a.object},g=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(r.a)(a)),a.focus=a.focus.bind(Object(r.a)(a)),a}Object(s.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,r=e.type,s=e.bsSize,o=e.valid,i=e.invalid,u=e.tag,d=e.addon,f=e.plaintext,g=e.innerRef,b=Object(c.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),h=["radio","checkbox"].indexOf(r)>-1,E=new RegExp("\\D","g"),v=u||("select"===r||"textarea"===r?r:"input"),y="form-control";f?(y+="-plaintext",v=u||"input"):"file"===r?y+="-file":h&&(y=d?null:"form-check-input"),b.size&&E.test(b.size)&&(Object(p.r)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),s=b.size,delete b.size);var j=Object(p.l)(m()(t,i&&"is-invalid",o&&"is-valid",!!s&&"form-control-"+s,y),a);return("input"===v||u&&"function"===typeof u)&&(b.type=r),b.children&&!f&&"select"!==r&&"string"===typeof v&&"select"!==v&&(Object(p.r)('Input with a type of "'+r+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete b.children),l.a.createElement(v,Object(n.a)({},b,{ref:g,className:j}))},t}(l.a.Component);g.propTypes=f,g.defaultProps={type:"text"},t.a=g},908:function(e,t,a){"use strict";var n=a(36),c=a(102),r=a(2),s=a.n(r),o=a(28),l=a.n(o),i=a(888),u=a.n(i),d=a(889),m={tag:d.p,className:l.a.string,cssModule:l.a.object},p=function(e){var t=e.className,a=e.cssModule,r=e.tag,o=Object(c.a)(e,["className","cssModule","tag"]),l=Object(d.l)(u()(t,"card-footer"),a);return s.a.createElement(r,Object(n.a)({},o,{className:l}))};p.propTypes=m,p.defaultProps={tag:"div"},t.a=p},967:function(e,t,a){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",function(){return n})}}]);
//# sourceMappingURL=51.9573c2f7.chunk.js.map