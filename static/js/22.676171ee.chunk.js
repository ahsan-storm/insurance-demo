(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1179:function(e,t,a){"use strict";a.r(t);var n=a(902),l=a(2),c=a.n(l),r=a(893),i=a(894),s=a(896),o=a(898),u=a(897),m=a(925),d=a(926),f=a(907),p=a(978),g=a(908),b=a(901),E=a(936),h=a(937),v=a(909),y=a(142),j=a(904),O=a(920);t.default=function(e){var t=Object(y.d)(),a=Object(l.useState)(!0),N=Object(n.a)(a,2),S=N[0],x=N[1],z=Object(l.useState)(!1),w=Object(n.a)(z,2),C=w[0],M=w[1],U=Object(l.useState)(!1),P=Object(n.a)(U,2),q=P[0],T=P[1],k=Object(l.useState)(!1),F=Object(n.a)(k,2),R=F[0],D=F[1],I=Object(l.useState)(!1),Q=Object(n.a)(I,2),A=Q[0],L=Q[1],J=Object(l.useState)({}),K=Object(n.a)(J,2),V=K[0],B=K[1],G=Object(l.useState)(""),H=Object(n.a)(G,2),W=H[0],X=H[1],Y=Object(l.useState)(!0),Z=Object(n.a)(Y,2),$=Z[0],_=Z[1],ee=Object(l.useState)(""),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],le=Object(l.useState)(""),ce=Object(n.a)(le,2),re=ce[0],ie=ce[1],se=Object(l.useState)(!0),oe=Object(n.a)(se,2),ue=oe[0],me=oe[1],de=Object(l.useState)(null),fe=Object(n.a)(de,2),pe=fe[0],ge=fe[1],be=Object(l.useState)(null),Ee=Object(n.a)(be,2),he=Ee[0],ve=Ee[1],ye=Object(l.useState)({}),je=Object(n.a)(ye,2),Oe=(je[0],je[1],Object(l.useState)({})),Ne=Object(n.a)(Oe,2),Se=Ne[0],xe=Ne[1],ze=Object(l.useState)({}),we=Object(n.a)(ze,2),Ce=we[0],Me=we[1],Ue=Object(l.useState)({}),Pe=Object(n.a)(Ue,2),qe=Pe[0],Te=Pe[1],ke=Object(l.useState)("ADD"),Fe=Object(n.a)(ke,2),Re=Fe[0],De=Fe[1],Ie=Object(l.useState)(""),Qe=Object(n.a)(Ie,2),Ae=Qe[0],Le=Qe[1];Object(l.useEffect)(function(){Je()},[]);var Je=function(){fetch(j.h+"/"+e.match.params.id).then(function(e){return e.json()}).then(function(e){console.log("Product by id: ",e),B(e),X(e.name),ie(e.price),e.image&&ve("data:image/jpeg;base64, "+e.image),e.units.length>0&&(Te(e.units[0]),xe(e.units[0]),e.units.length>1?Me(e.units[1]):Me(e.units[0])),x(!1)}).catch(function(e){x(!1),console.log("Fetch products error: ",e)})},Ke=function(e,t){if("name"===e)X(t.target.value);else if("transferQuantity"===e)ne(t.target.value);else if("price"===e)ie(t.target.value);else if("image"===e)t.target.files&&t.target.files.length>0?(ge(t.target.files[0]),ve(URL.createObjectURL(t.target.files[0]))):(ge(null),V.image?ve("data:image/jpeg;base64, "+V.image):ve(null));else if("selectedToUnit"===e){console.log("value: ",t.target.value);var a=V.units.find(function(e){return e.id==t.target.value});console.log("to unit: ",a),Me(a)}else if("selectedFromUnit"===e){console.log("value: ",t.target.value);var n=V.units.find(function(e){return e.id==t.target.value});console.log("from unit: ",n),xe(n)}else if("selectedUnitQuantity"===e){var l=V.units.find(function(e){return e.id==t.target.value});Te(l)}else"quantityAction"===e?De(t.target.value):"unitQuantity"===e&&Le(t.target.value)},Ve=function(){var e=!0;return W?_(!0):(_(!1),e=!1),!re||Number.parseFloat(re)<1?(me(!1),e=!1):me(!0),e},Be=function(e){if(!e.ok)throw Error(e.statusText);return e};return c.a.createElement("div",{className:"animated fadeIn"},S&&c.a.createElement("div",{className:"loader-container"},c.a.createElement(O.CircleLoader,{size:100,color:"#20a8d8",loading:S})),!S&&c.a.createElement(r.a,null,c.a.createElement(i.a,{sm:"12",md:"6"},c.a.createElement(s.a,null,c.a.createElement(o.a,null,c.a.createElement("strong",null,"Product Details")),V&&c.a.createElement(u.a,null,c.a.createElement(r.a,null,c.a.createElement(i.a,{xs:"12"},c.a.createElement(m.a,null,c.a.createElement(d.a,{htmlFor:"name"},"Name"),c.a.createElement(f.a,{invalid:!$,type:"text",value:W,onChange:function(e){Ke("name",e)},id:"cp-name",placeholder:"Enter unit name",required:!0}),c.a.createElement(p.a,null,"Name can not be empty")))),c.a.createElement(r.a,null,c.a.createElement(i.a,{xs:"12"},c.a.createElement(m.a,null,c.a.createElement(d.a,{htmlFor:"quantity"},"Price for single piece (SEK)"),c.a.createElement(f.a,{invalid:!ue,type:"number",value:re,onChange:function(e){Ke("price",e)},id:"cp-price",placeholder:"Enter price for single piece",required:!0}),c.a.createElement(p.a,null,"Price can not be empty"))))),c.a.createElement(g.a,{className:"d-flex"},c.a.createElement(b.a,{disabled:C,type:"submit",onClick:function(){if(Ve()){var e={id:V.id,name:W,price:re};M(!0),fetch(j.h,{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then(Be).then(function(e){return e.json()}).then(function(e){M(!1),t.show("Updated product successfully",{timeout:3e3,type:"success"}),console.log("Updated product result: ",e)}).catch(function(e){M(!1),console.log("Updating product error: ",e),t.show("Error: Can not update product",{timeout:5e3,type:"error"})})}},size:"sm",color:"primary"},c.a.createElement("i",{className:"fa fa-dot-circle-o"})," Update"),c.a.createElement("div",{className:"ml-2"},c.a.createElement(O.CircleLoader,{size:25,color:"#20a8d8",loading:C}))))),c.a.createElement(i.a,{sm:"12",md:"6"},c.a.createElement(s.a,null,c.a.createElement(o.a,null,c.a.createElement("strong",null,"Product Image")),c.a.createElement(u.a,null,!S&&c.a.createElement("div",null,c.a.createElement(r.a,null,c.a.createElement(i.a,{md:"12"},c.a.createElement(m.a,null,c.a.createElement(f.a,{type:"file",id:"file-input",onChange:function(e){Ke("image",e)},name:"file-input",accept:"image/png, image/jpeg"})))),he&&c.a.createElement("img",{src:he,height:"100"}))),c.a.createElement(g.a,{className:"d-flex"},c.a.createElement(b.a,{type:"submit",disabled:null===pe||q,onClick:function(){T(!0);var e=new FormData;e.append("image",pe),fetch(j.h+"/"+V.id+"/image",{method:"PUT",body:e}).then(Be).then(function(e){return e.json()}).then(function(e){T(!1),t.show("Created product successfully",{timeout:3e3,type:"success"}),console.log("Updated product result: ",e)}).catch(function(e){T(!1),console.log("Creating product error: ",e),t.show("Product with this name already exist for this unit",{timeout:5e3,type:"error"})})},size:"sm",color:"primary"},c.a.createElement("i",{className:"fa fa-dot-circle-o"})," Update"),c.a.createElement("div",{className:"ml-2"},c.a.createElement(O.CircleLoader,{size:25,color:"#20a8d8",loading:q})))))),!S&&c.a.createElement(r.a,null,V&&c.a.createElement(i.a,{sm:"12",md:"6"},c.a.createElement(s.a,null,c.a.createElement(o.a,null,c.a.createElement("strong",null,"Quantity In All Units")),c.a.createElement(u.a,null,V.units.length<1&&c.a.createElement("div",{className:"text-center"},c.a.createElement(E.a,null,c.a.createElement(h.a,{action:!0,color:"danger"},"No unit added yet"))),V.units.length>0&&c.a.createElement("div",null,c.a.createElement(r.a,null,V.units&&V.units.map(function(e){return c.a.createElement(i.a,{md:"12",xl:"6"},c.a.createElement(s.a,null,c.a.createElement(u.a,null,c.a.createElement("p",{className:"text-lg-primary m-0"},e.name),c.a.createElement(v.a,{color:"dark"},c.a.createElement("span",null,e.quantity),c.a.createElement("small",null," total items")))))})),c.a.createElement("hr",null),c.a.createElement(r.a,null,c.a.createElement(i.a,{xs:"12"},c.a.createElement(m.a,null,c.a.createElement(d.a,{htmlFor:"selectSm"},"Unit"),c.a.createElement(f.a,{type:"select",value:Te.id,onChange:function(e){Ke("selectedUnitQuantity",e)},name:"selectSm",id:"cp-unit",bsSize:"sm"},V.units&&V.units.map(function(e){return c.a.createElement("option",{value:e.id},e.name)}))))),c.a.createElement(r.a,null,c.a.createElement(i.a,{xs:"12"},c.a.createElement(m.a,null,c.a.createElement(d.a,{htmlFor:"selectSm"},"Action"),c.a.createElement(f.a,{type:"select",value:Re,onChange:function(e){Ke("quantityAction",e)},name:"selectSm",id:"cp-unit",bsSize:"sm"},c.a.createElement("option",{value:"ADD"},"ADD"),c.a.createElement("option",{value:"REMOVE"},"REMOVE"))))),c.a.createElement(r.a,null,c.a.createElement(i.a,{xs:"12"},c.a.createElement(m.a,null,c.a.createElement(d.a,{htmlFor:"quantity"},"Quantity"),c.a.createElement(f.a,{type:"number",min:"1",max:"1000",value:Ae,onChange:function(e){Ke("unitQuantity",e)},id:"cp-transfer-quantity",placeholder:"Enter quantity to add",required:!0})))))),c.a.createElement(g.a,{className:"d-flex"},c.a.createElement(b.a,{disabled:R,type:"submit",onClick:function(){D(!0);var e={action:Re,unitId:qe.id,productId:V.id,quantity:Ae};console.log("Update quantity request: ",e),fetch(j.e,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then(Be).then(function(e){return e.json()}).then(function(e){D(!1),B(e),t.show("Updated quantity successfully",{timeout:3e3,type:"success"}),console.log("Updated product result: ",e)}).catch(function(e){D(!1),console.log("Updating product error: ",e),t.show("Invalid quantity specified",{timeout:4e3,type:"error"})})},size:"sm",color:"primary"},c.a.createElement("i",{className:"fa fa-dot-circle-o"}),"Update"),c.a.createElement("div",{className:"ml-2"},c.a.createElement(O.CircleLoader,{size:25,color:"#20a8d8",loading:R}))))),c.a.createElement(i.a,{sm:"12",md:"6"},c.a.createElement(s.a,null,c.a.createElement(o.a,null,c.a.createElement("strong",null,"Transfer Product")),c.a.createElement(u.a,null,V.units.length<2&&c.a.createElement("div",{className:"text-center"},c.a.createElement(E.a,null,c.a.createElement(h.a,{action:!0,color:"danger"},"At least 2 Units must exist for transferring products"))),V.units.length>1&&c.a.createElement("div",null,c.a.createElement(r.a,null,c.a.createElement(i.a,{xs:"12"},c.a.createElement(m.a,null,c.a.createElement(d.a,{htmlFor:"selectSm"},"From"),c.a.createElement(f.a,{type:"select",value:Se.id,onChange:function(e){Ke("selectedFromUnit",e)},name:"selectSm",id:"cp-unit",bsSize:"sm"},V.units.map(function(e){return c.a.createElement("option",{value:e.id},e.name)}))))),c.a.createElement(r.a,null,c.a.createElement(i.a,{xs:"12"},c.a.createElement(m.a,null,c.a.createElement(d.a,{htmlFor:"selectSm"},"To"),c.a.createElement(f.a,{type:"select",value:Ce.id,onChange:function(e){Ke("selectedToUnit",e)},name:"selectSm",id:"cp-unit",bsSize:"sm"},V.units.map(function(e){return c.a.createElement("option",{value:e.id},e.name)}))))),c.a.createElement(r.a,null,c.a.createElement(i.a,{xs:"12"},c.a.createElement(m.a,null,c.a.createElement(d.a,{htmlFor:"quantity"},"Quantity to transfer"),c.a.createElement(f.a,{type:"number",min:"1",max:"1000",value:ae,onChange:function(e){Ke("transferQuantity",e)},id:"cp-transfer-quantity",placeholder:"Enter quantity to transfer",required:!0})))),c.a.createElement(r.a,null,c.a.createElement(i.a,{xs:"12"},c.a.createElement(m.a,null,c.a.createElement(d.a,{htmlFor:"quantity"},"Price for single piece (SEK)"),c.a.createElement(f.a,{value:V.price,id:"cp-transfer-single-price",placeholder:"Enter price for single piece",disabled:!0})))),c.a.createElement(r.a,null,c.a.createElement(i.a,{xs:"12"},c.a.createElement(m.a,null,c.a.createElement(d.a,{htmlFor:"quantity"},"Total price (SEK)"),c.a.createElement(f.a,{value:V.price*ae,id:"cp-transfer-total-price",disabled:!0})))))),c.a.createElement(g.a,{className:"d-flex"},c.a.createElement(b.a,{disabled:V.units.length<2||A,type:"submit",onClick:function(){var e={sourceUnitId:Se.id,destinationUnitId:Ce.id,productId:V.id,quantity:ae};L(!0),fetch(j.g,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then(Be).then(function(e){return e.json()}).then(function(e){L(!1),B(e),t.show("Product transferred successfully",{timeout:3e3,type:"success"}),console.log("Product transferred successfully: ",e)}).catch(function(e){L(!1),console.log("Error while transferring product ",e),t.show("Error while transferring product",{timeout:5e3,type:"error"})})},size:"sm",color:"primary"},c.a.createElement("i",{className:"fa fa-dot-circle-o"})," Transfer"),c.a.createElement("div",{className:"ml-2"},c.a.createElement(O.CircleLoader,{size:25,color:"#20a8d8",loading:A})))))))}},904:function(e,t,a){"use strict";a.d(t,"i",function(){return l}),a.d(t,"h",function(){return c}),a.d(t,"e",function(){return r}),a.d(t,"f",function(){return i}),a.d(t,"a",function(){return s}),a.d(t,"g",function(){return o}),a.d(t,"d",function(){return u}),a.d(t,"c",function(){return m}),a.d(t,"b",function(){return d});var n="http://localhost:8080/",l=n+"units",c=n+"products",r=c+"/quantity",i=c+"/search",s=n+"products/create",o=n+"products/transfers",u=n+"products/invoices",m=u+"/create",d=u+"/confirm"},907:function(e,t,a){"use strict";var n=a(36),l=a(102),c=a(892),r=a(64),i=a(2),s=a.n(i),o=a(28),u=a.n(o),m=a(888),d=a.n(m),f=a(889),p={children:u.a.node,type:u.a.string,size:u.a.string,bsSize:u.a.string,valid:u.a.bool,invalid:u.a.bool,tag:f.p,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),plaintext:u.a.bool,addon:u.a.bool,className:u.a.string,cssModule:u.a.object},g=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(c.a)(a)),a.focus=a.focus.bind(Object(c.a)(a)),a}Object(r.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.type,r=e.bsSize,i=e.valid,o=e.invalid,u=e.tag,m=e.addon,p=e.plaintext,g=e.innerRef,b=Object(l.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),E=["radio","checkbox"].indexOf(c)>-1,h=new RegExp("\\D","g"),v=u||("select"===c||"textarea"===c?c:"input"),y="form-control";p?(y+="-plaintext",v=u||"input"):"file"===c?y+="-file":E&&(y=m?null:"form-check-input"),b.size&&h.test(b.size)&&(Object(f.r)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),r=b.size,delete b.size);var j=Object(f.l)(d()(t,o&&"is-invalid",i&&"is-valid",!!r&&"form-control-"+r,y),a);return("input"===v||u&&"function"===typeof u)&&(b.type=c),b.children&&!p&&"select"!==c&&"string"===typeof v&&"select"!==v&&(Object(f.r)('Input with a type of "'+c+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete b.children),s.a.createElement(v,Object(n.a)({},b,{ref:g,className:j}))},t}(s.a.Component);g.propTypes=p,g.defaultProps={type:"text"},t.a=g},908:function(e,t,a){"use strict";var n=a(36),l=a(102),c=a(2),r=a.n(c),i=a(28),s=a.n(i),o=a(888),u=a.n(o),m=a(889),d={tag:m.p,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,a=e.cssModule,c=e.tag,i=Object(l.a)(e,["className","cssModule","tag"]),s=Object(m.l)(u()(t,"card-footer"),a);return r.a.createElement(c,Object(n.a)({},i,{className:s}))};f.propTypes=d,f.defaultProps={tag:"div"},t.a=f},909:function(e,t,a){"use strict";var n=a(36),l=a(102),c=a(2),r=a.n(c),i=a(28),s=a.n(i),o=a(888),u=a.n(o),m=a(889),d={color:s.a.string,pill:s.a.bool,tag:m.p,innerRef:s.a.oneOfType([s.a.object,s.a.func,s.a.string]),children:s.a.node,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,a=e.cssModule,c=e.color,i=e.innerRef,s=e.pill,o=e.tag,d=Object(l.a)(e,["className","cssModule","color","innerRef","pill","tag"]),f=Object(m.l)(u()(t,"badge","badge-"+c,!!s&&"badge-pill"),a);return d.href&&"span"===o&&(o="a"),r.a.createElement(o,Object(n.a)({},d,{className:f,ref:i}))};f.propTypes=d,f.defaultProps={color:"secondary",pill:!1,tag:"span"},t.a=f},925:function(e,t,a){"use strict";var n=a(36),l=a(102),c=a(2),r=a.n(c),i=a(28),s=a.n(i),o=a(888),u=a.n(o),m=a(889),d={children:s.a.node,row:s.a.bool,check:s.a.bool,inline:s.a.bool,disabled:s.a.bool,tag:m.p,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,a=e.cssModule,c=e.row,i=e.disabled,s=e.check,o=e.inline,d=e.tag,f=Object(l.a)(e,["className","cssModule","row","disabled","check","inline","tag"]),p=Object(m.l)(u()(t,!!c&&"row",s?"form-check":"form-group",!(!s||!o)&&"form-check-inline",!(!s||!i)&&"disabled"),a);return r.a.createElement(d,Object(n.a)({},f,{className:p}))};f.propTypes=d,f.defaultProps={tag:"div"},t.a=f},926:function(e,t,a){"use strict";var n=a(36),l=a(102),c=a(2),r=a.n(c),i=a(28),s=a.n(i),o=a(888),u=a.n(o),m=a(890),d=a.n(m),f=a(889),p=s.a.oneOfType([s.a.number,s.a.string]),g=s.a.oneOfType([s.a.string,s.a.number,s.a.shape({size:p,order:p,offset:p})]),b={children:s.a.node,hidden:s.a.bool,check:s.a.bool,size:s.a.string,for:s.a.string,tag:f.p,className:s.a.string,cssModule:s.a.object,xs:g,sm:g,md:g,lg:g,xl:g,widths:s.a.array},E={tag:"label",widths:["xs","sm","md","lg","xl"]},h=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},v=function(e){var t=e.className,a=e.cssModule,c=e.hidden,i=e.widths,s=e.tag,o=e.check,m=e.size,p=e.for,g=Object(l.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),b=[];i.forEach(function(t,n){var l=e[t];if(delete g[t],l||""===l){var c,r=!n;if(d()(l)){var i,s=r?"-":"-"+t+"-";c=h(r,t,l.size),b.push(Object(f.l)(u()(((i={})[c]=l.size||""===l.size,i["order"+s+l.order]=l.order||0===l.order,i["offset"+s+l.offset]=l.offset||0===l.offset,i))),a)}else c=h(r,t,l),b.push(c)}});var E=Object(f.l)(u()(t,!!c&&"sr-only",!!o&&"form-check-label",!!m&&"col-form-label-"+m,b,!!b.length&&"col-form-label"),a);return r.a.createElement(s,Object(n.a)({htmlFor:p},g,{className:E}))};v.propTypes=b,v.defaultProps=E,t.a=v},936:function(e,t,a){"use strict";var n=a(36),l=a(102),c=a(2),r=a.n(c),i=a(28),s=a.n(i),o=a(888),u=a.n(o),m=a(889),d={tag:m.p,flush:s.a.bool,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,a=e.cssModule,c=e.tag,i=e.flush,s=Object(l.a)(e,["className","cssModule","tag","flush"]),o=Object(m.l)(u()(t,"list-group",!!i&&"list-group-flush"),a);return r.a.createElement(c,Object(n.a)({},s,{className:o}))};f.propTypes=d,f.defaultProps={tag:"ul"},t.a=f},937:function(e,t,a){"use strict";var n=a(36),l=a(102),c=a(2),r=a.n(c),i=a(28),s=a.n(i),o=a(888),u=a.n(o),m=a(889),d={tag:m.p,active:s.a.bool,disabled:s.a.bool,color:s.a.string,action:s.a.bool,className:s.a.any,cssModule:s.a.object},f=function(e){e.preventDefault()},p=function(e){var t=e.className,a=e.cssModule,c=e.tag,i=e.active,s=e.disabled,o=e.action,d=e.color,p=Object(l.a)(e,["className","cssModule","tag","active","disabled","action","color"]),g=Object(m.l)(u()(t,!!i&&"active",!!s&&"disabled",!!o&&"list-group-item-action",!!d&&"list-group-item-"+d,"list-group-item"),a);return s&&(p.onClick=f),r.a.createElement(c,Object(n.a)({},p,{className:g}))};p.propTypes=d,p.defaultProps={tag:"li"},t.a=p},978:function(e,t,a){"use strict";var n=a(36),l=a(102),c=a(2),r=a.n(c),i=a(28),s=a.n(i),o=a(888),u=a.n(o),m=a(889),d={children:s.a.node,tag:m.p,className:s.a.string,cssModule:s.a.object,valid:s.a.bool,tooltip:s.a.bool},f={tag:"div",valid:void 0},p=function(e){var t=e.className,a=e.cssModule,c=e.valid,i=e.tooltip,s=e.tag,o=Object(l.a)(e,["className","cssModule","valid","tooltip","tag"]),d=i?"tooltip":"feedback",f=Object(m.l)(u()(t,c?"valid-"+d:"invalid-"+d),a);return r.a.createElement(s,Object(n.a)({},o,{className:f}))};p.propTypes=d,p.defaultProps=f,t.a=p}}]);
//# sourceMappingURL=22.676171ee.chunk.js.map