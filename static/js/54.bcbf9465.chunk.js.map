{"version":3,"sources":["views/Products/Products.js","constants/Api.js","views/Products/ProductCard.js"],"names":["Products","props","_useState","useState","_useState2","Object","_Users_muhammadahsan_Documents_insurance_test_insurance_test_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","products","setProducts","_useState3","_useState4","loading","setLoading","_useState5","_useState6","currentPage","setCurrentPage","_useState7","itemsPerPage","_useState9","_useState10","totalElements","setTotalElements","_useState11","_useState12","query","setQuery","debouncedFetchProducts","useRef","debounce","controller","fetchAllProductsByPage","current","useEffect","fetch","PRODUCTS_SEARCH_URL","then","res","json","result","console","log","content","catch","error","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","reactstrap__WEBPACK_IMPORTED_MODULE_2__","reactstrap__WEBPACK_IMPORTED_MODULE_3__","xl","reactstrap__WEBPACK_IMPORTED_MODULE_4__","reactstrap__WEBPACK_IMPORTED_MODULE_5__","reactstrap__WEBPACK_IMPORTED_MODULE_6__","block","color","onClick","history","push","aria-pressed","reactstrap__WEBPACK_IMPORTED_MODULE_7__","reactstrap__WEBPACK_IMPORTED_MODULE_8__","reactstrap__WEBPACK_IMPORTED_MODULE_9__","addonType","reactstrap__WEBPACK_IMPORTED_MODULE_10__","reactstrap__WEBPACK_IMPORTED_MODULE_11__","value","size","type","onChange","event","target","searchQueryChanged","placeholder","react_spinners__WEBPACK_IMPORTED_MODULE_16__","length","src","height","map","product","index","_ProductCard__WEBPACK_IMPORTED_MODULE_13__","key","id","image","name","quantity","price","react_js_pagination__WEBPACK_IMPORTED_MODULE_14___default","activePage","totalItemsCount","itemsCountPerPage","pageRangeDisplayed","number","productsPageChanged","itemClass","linkClass","__webpack_require__","d","__webpack_exports__","UNITS_URL","PRODUCTS_URL","PRODUCTS_QUANTITY_URL","CREATE_PRODUCTS_URL","PRODUCTS_TRANSFERS_URL","PRODUCTS_INVOICES_URL","PRODUCTS_INVOICES_CREATE_URL","PRODUCTS_INVOICES_CONFIRM_URL","API_URL","ProductCard","setQuantity","imageSrc","productLink","concat","isNumber","test","xs","sm","md","lg","transfer","reactstrap_es_CardHeader__WEBPACK_IMPORTED_MODULE_6__","addProduct"],"mappings":"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","file":"static/js/54.bcbf9465.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nimport {\n  Button,\n  Card,\n  CardBody,\n  CardHeader,\n  Col,\n  Input, InputGroup, InputGroupAddon, InputGroupText, Row\n} from \"reactstrap\";\nimport {PRODUCTS_SEARCH_URL} from \"../../constants/Api\";\nimport ProductCard from \"./ProductCard\";\nimport Pagination from \"react-js-pagination\";\nimport { debounce } from \"lodash\";\nimport {CircleLoader} from \"react-spinners\";\n\nfunction Products(props) {\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage] = useState(8);\n  const [totalElements, setTotalElements] = useState(0);\n  const [query, setQuery] = useState('');\n\n  const debouncedFetchProducts = useRef(\n    debounce((query, currentPage, controller) => fetchAllProductsByPage(query, currentPage, controller), 500)\n  ).current;\n\n  useEffect(() => {\n    debouncedFetchProducts(query, currentPage);\n  }, [debouncedFetchProducts, currentPage, query]);\n\n  const fetchAllProductsByPage = (query, currentPage, controller) => {\n    fetch(PRODUCTS_SEARCH_URL + '?query=' + query + '&size=' + itemsPerPage + '&page=' + (currentPage - 1) + '&sort=name')\n      .then(res => res.json())\n      .then((result) => {\n        if (query === result.query) {\n          console.log('Products: ', result.result);\n          setLoading(false);\n          setProducts(result.result.content);\n          setTotalElements(result.result.totalElements);\n        }\n      })\n      .catch(error => {\n        setLoading(false);\n        console.log('Fetch products error: ', error);\n    });\n\n  };\n\n  const productsPageChanged = (number) => {\n    if (number !== (currentPage)) {\n      console.log('Number: ', number);\n      setLoading(true);\n      setCurrentPage(number);\n    }\n  };\n\n  const searchQueryChanged = (event) => {\n    setLoading(true);\n    setQuery(event.target.value)\n  };\n\n  return (\n    <div className=\"animated fadeIn\">\n      <Row>\n        <Col xl={12}>\n          <Card>\n            <CardHeader className=\"align-items-center\">\n              <i className=\"fa fa-align-justify\"></i>\n              <span>Products</span>\n              <span className=\"float-right mb-0\">\n                  <Button block color=\"primary\" onClick={() => props.history.push('/products/create')} aria-pressed=\"true\">Create</Button>\n              </span>\n            </CardHeader>\n            <CardBody>\n              <InputGroup className=\"input-prepend\">\n                <InputGroupAddon addonType=\"prepend\">\n                  <InputGroupText>\n                    <i className=\"fa fa-search\"></i>\n                  </InputGroupText>\n                </InputGroupAddon>\n                <Input value={query} size=\"16\" type=\"text\" onChange={(event) => searchQueryChanged(event)} placeholder=\"What are you looking for?\" />\n              </InputGroup>\n\n              <br/>\n\n              {loading &&\n              <div className=\"loader-container\">\n                <CircleLoader\n                  size={100}\n                  color={\"#20a8d8\"}\n                  loading={loading}\n                />\n              </div>}\n\n              {!loading && products.length === 0 &&\n              <div className=\"text-center\">\n                <img src=\"../../assets/img/not-found.png\" height=\"150\"/>\n                <p className=\"font-weight-bold\">Nothing found</p>\n              </div>}\n\n              {products.length > 0 && !loading &&\n              <Row>\n                {products.map((product, index) =>\n                  <ProductCard\n                    key={index}\n                    id={product.id}\n                    image={product.image}\n                    name={product.name}\n                    quantity={product.quantity}\n                    price={product.price}\n                    history={props.history}\n                  />\n                )}\n              </Row>}\n\n              {!loading && products.length > 0 &&\n              <div className=\"text-center products-pagination\">\n                <Pagination\n                  activePage={currentPage}\n                  totalItemsCount={totalElements}\n                  itemsCountPerPage={itemsPerPage}\n                  pageRangeDisplayed={5}\n                  onChange={(number) => productsPageChanged(number)}\n                  itemClass=\"page-item\"\n                  linkClass=\"page-link\"/>\n              </div>}\n            </CardBody>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  )\n}\n\nexport default Products;\n","export const API_URL = \"http://localhost:8080/\";\nexport const UNITS_URL = API_URL + \"units\";\nexport const CREATE_UNIT_URL = API_URL + \"units/create\";\nexport const PRODUCTS_URL = API_URL + \"products\";\nexport const PRODUCTS_QUANTITY_URL = PRODUCTS_URL + \"/quantity\";\nexport const PRODUCTS_SEARCH_URL = PRODUCTS_URL + \"/search\";\nexport const CREATE_PRODUCTS_URL = API_URL + \"products/create\";\nexport const PRODUCTS_UNITS_URL = API_URL + \"products/units\";\nexport const PRODUCTS_TRANSFERS_URL = API_URL + \"products/transfers\";\nexport const PRODUCTS_INVOICES_URL = API_URL + \"products/invoices\";\nexport const PRODUCTS_INVOICES_CREATE_URL = PRODUCTS_INVOICES_URL + \"/create\";\nexport const PRODUCTS_INVOICES_CONFIRM_URL = PRODUCTS_INVOICES_URL + \"/confirm\";\nexport const PAGE_SIZE_8 = \"?size=1&page=\";\n","import React, {useState} from 'react';\nimport {Badge, Card, CardBody, Col, Input, InputGroup} from \"reactstrap\";\nimport CardHeader from \"reactstrap/es/CardHeader\";\n\nfunction ProductCard(props) {\n  console.log(props);\n  const [quantity, setQuantity] = useState('1');\n\n  const imageSrc = props.image ? \"data:image/jpeg;base64, \" + props.image : \"../../assets/img/no-image.png\";\n  const productLink = `/products/${props.id}`;\n\n  const quantityChanged = (quantity) => {\n    console.log(quantity);\n    if (isNumber(quantity) || quantity === '') {\n      setQuantity(quantity);\n    }\n  };\n\n  const isNumber = (value) => {\n    if (/^\\d+$/.test(value)) {\n      return true;\n    }\n    return false;\n  };\n\n  const cardClicked = () => {\n    if (!props.transfer) {\n      props.history.push(productLink);\n    }\n  };\n\n  return (\n    <Col xs=\"12\" sm=\"6\" md=\"4\" lg=\"4\" xl=\"4\">\n      <Card onClick={cardClicked}>\n        <CardHeader>\n          <div className=\"text-center\">\n            <img src={imageSrc} height=\"100\" />\n          </div>\n        </CardHeader>\n        <CardBody>\n          <p className=\"text-lg-primary m-0\">{props.name}</p>\n          {!props.transfer &&\n          <p className=\"m-0\">{props.quantity} <small className=\"text-muted\">total items</small></p>}\n          <p className=\"m-0\">{props.price} <small className=\"text-muted\">SEK / pc</small></p>\n        </CardBody>\n        {props.transfer &&\n        <div className=\"d-flex justify-content-between bg-primary\">\n          <Input onChange={(event) => quantityChanged(event.target.value)} value={quantity} className=\"w-50 rounded-0 text-center\" size=\"16\" />\n          <span onClick={() => props.addProduct(props.id, quantity)} className=\"w-50 text-center align-self-center pointer\">ADD</span>\n        </div>}\n      </Card>\n    </Col>\n  )\n}\n\nexport default ProductCard;\n"],"sourceRoot":""}